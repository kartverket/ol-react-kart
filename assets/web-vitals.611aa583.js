var m,E,O,S,k,j=-1,h=function(e){addEventListener("pageshow",function(t){t.persisted&&(j=t.timeStamp,e(t))},!0)},B=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},b=function(){var e=B();return e&&e.activationStart||0},p=function(e,t){var i=B(),n="navigate";return j>=0?n="back-forward-cache":i&&(n=document.prerendering||b()>0?"prerender":i.type.replace(/_/g,"-")),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},g=function(e,t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(a){t(a.getEntries())});return n.observe(Object.assign({type:e,buffered:!0},i||{})),n}}catch{}},C=function(e,t){var i=function n(a){a.type!=="pagehide"&&document.visibilityState!=="hidden"||(e(a),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},l=function(e,t,i,n){var a,r;return function(c){t.value>=0&&(c||n)&&((r=t.value-(a||0))||a===void 0)&&(a=t.value,t.delta=r,t.rating=function(u,f){return u>f[1]?"poor":u>f[0]?"needs-improvement":"good"}(t.value,i),e(t))}},y=-1,M=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},N=function(){C(function(e){var t=e.timeStamp;y=t},!0)},D=function(){return y<0&&(y=M(),N(),h(function(){setTimeout(function(){y=M(),N()},0)})),{get firstHiddenTime(){return y}}},U=function(e,t){t=t||{};var i,n=[1800,3e3],a=D(),r=p("FCP"),c=function(o){o.forEach(function(s){s.name==="first-contentful-paint"&&(f&&f.disconnect(),s.startTime<a.firstHiddenTime&&(r.value=s.startTime-b(),r.entries.push(s),i(!0)))})},u=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],f=u?null:g("paint",c);(u||f)&&(i=l(e,r,n,t.reportAllChanges),u&&c([u]),h(function(o){r=p("FCP"),i=l(e,r,n,t.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){r.value=performance.now()-o.timeStamp,i(!0)})})}))},R=!1,A=-1,$=function(e,t){t=t||{};var i=[.1,.25];R||(U(function(s){A=s.value}),R=!0);var n,a=function(s){A>-1&&e(s)},r=p("CLS",0),c=0,u=[],f=function(s){s.forEach(function(d){if(!d.hadRecentInput){var w=u[0],Q=u[u.length-1];c&&d.startTime-Q.startTime<1e3&&d.startTime-w.startTime<5e3?(c+=d.value,u.push(d)):(c=d.value,u=[d]),c>r.value&&(r.value=c,r.entries=u,n())}})},o=g("layout-shift",f);o&&(n=l(a,r,i,t.reportAllChanges),C(function(){f(o.takeRecords()),n(!0)}),h(function(){c=0,A=-1,r=p("CLS",0),n=l(a,r,i,t.reportAllChanges)}))},T={passive:!0,capture:!0},V=new Date,q=function(e,t){m||(m=t,E=e,O=new Date,z(removeEventListener),_())},_=function(){if(E>=0&&E<O-V){var e={entryType:"first-input",name:m.type,target:m.target,cancelable:m.cancelable,startTime:m.timeStamp,processingStart:m.timeStamp+E};S.forEach(function(t){t(e)}),S=[]}},W=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(i,n){var a=function(){q(i,n),c()},r=function(){c()},c=function(){removeEventListener("pointerup",a,T),removeEventListener("pointercancel",r,T)};addEventListener("pointerup",a,T),addEventListener("pointercancel",r,T)}(t,e):q(t,e)}},z=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,W,T)})},tt=function(e,t){t=t||{};var i,n=[100,300],a=D(),r=p("FID"),c=function(o){o.startTime<a.firstHiddenTime&&(r.value=o.processingStart-o.startTime,r.entries.push(o),i(!0))},u=function(o){o.forEach(c)},f=g("first-input",u);i=l(e,r,n,t.reportAllChanges),f&&C(function(){u(f.takeRecords()),f.disconnect()},!0),f&&h(function(){var o;r=p("FID"),i=l(e,r,n,t.reportAllChanges),S=[],E=-1,m=null,z(addEventListener),o=c,S.push(o),_()})},G=0,F=1/0,L=0,X=function(e){e.forEach(function(t){t.interactionId&&(F=Math.min(F,t.interactionId),L=Math.max(L,t.interactionId),G=L?(L-F)/7+1:0)})},J=function(){return k?G:performance.interactionCount||0},Y=function(){"interactionCount"in performance||k||(k=g("event",X,{type:"event",buffered:!0,durationThreshold:0}))},K=0,x=function(){return J()-K},v=[],I={},H=function(e){var t=v[v.length-1],i=I[e.interactionId];if(i||v.length<10||e.duration>t.latency){if(i)i.entries.push(e),i.latency=Math.max(i.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};I[n.id]=n,v.push(n)}v.sort(function(a,r){return r.latency-a.latency}),v.splice(10).forEach(function(a){delete I[a.id]})}},et=function(e,t){t=t||{};var i=[200,500];Y();var n,a=p("INP"),r=function(u){u.forEach(function(s){s.interactionId&&H(s),s.entryType==="first-input"&&!v.some(function(d){return d.entries.some(function(w){return s.duration===w.duration&&s.startTime===w.startTime})})&&H(s)});var f,o=(f=Math.min(v.length-1,Math.floor(x()/50)),v[f]);o&&o.latency!==a.value&&(a.value=o.latency,a.entries=o.entries,n())},c=g("event",r,{durationThreshold:t.durationThreshold||40});n=l(e,a,i,t.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),C(function(){r(c.takeRecords()),a.value<0&&x()>0&&(a.value=0,a.entries=[]),n(!0)}),h(function(){v=[],K=J(),a=p("INP"),n=l(e,a,i,t.reportAllChanges)}))},P={},nt=function(e,t){t=t||{};var i,n=[2500,4e3],a=D(),r=p("LCP"),c=function(o){var s=o[o.length-1];if(s){var d=s.startTime-b();d<a.firstHiddenTime&&(r.value=d,r.entries=[s],i())}},u=g("largest-contentful-paint",c);if(u){i=l(e,r,n,t.reportAllChanges);var f=function(){P[r.id]||(c(u.takeRecords()),u.disconnect(),P[r.id]=!0,i(!0))};["keydown","click"].forEach(function(o){addEventListener(o,f,{once:!0,capture:!0})}),C(f,!0),h(function(o){r=p("LCP"),i=l(e,r,n,t.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){r.value=performance.now()-o.timeStamp,P[r.id]=!0,i(!0)})})})}},Z=function e(t){document.prerendering?addEventListener("prerenderingchange",function(){return e(t)},!0):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},rt=function(e,t){t=t||{};var i=[800,1800],n=p("TTFB"),a=l(e,n,i,t.reportAllChanges);Z(function(){var r=B();if(r){if(n.value=Math.max(r.responseStart-b(),0),n.value<0||n.value>performance.now())return;n.entries=[r],a(!0),h(function(){n=p("TTFB",0),(a=l(e,n,i,t.reportAllChanges))(!0)})}})};export{$ as getCLS,U as getFCP,tt as getFID,et as getINP,nt as getLCP,rt as getTTFB,$ as onCLS,U as onFCP,tt as onFID,et as onINP,nt as onLCP,rt as onTTFB};
